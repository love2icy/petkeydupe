<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Key Generator</title>
</head>
<body>
  <button id="generate-btn">Generate Key</button>
  <p id="result"></p>

  <script>
    // Simple stable device id stored in localStorage
    function getDeviceId() {
      let id = localStorage.getItem('deviceId');
      if (!id) {
        id = crypto.randomUUID();
        localStorage.setItem('deviceId', id);
      }
      return id;
    }

    document.getElementById('generate-btn').addEventListener('click', async () => {
      const deviceId = getDeviceId();
      try {
        const res = await fetch(`https://your-render-backend-url.onrender.com/generate-key?deviceId=${deviceId}`);
        const data = await res.json();
        document.getElementById('result').innerText = data.message + (data.key ? ` Key: ${data.key}` : '');
      } catch (e) {
        document.getElementById('result').innerText = 'Error fetching key';
      }
    });
  </script>
</body>
</html>
