<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Echo Scripts Key Generator</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet" />
  <style>
    /* Reset & base */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body {
      margin: 0; padding: 0;
      overflow-x: hidden;
      font-family: 'Poppins', sans-serif;
      background: #000; color: #fff;
      height: 100vh; text-align: center; position: relative;
    }

    /* Video background */
    #bg-video {
      position: fixed; top: 0; left: 0;
      width: 100vw; height: 100vh;
      object-fit: cover; z-index: -2;
      pointer-events: none;
    }

    /* Fade-in/up animation */
    @keyframes fadeInUpSmooth {
      from { opacity: 0; transform: translateY(25px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* Header */
    .header {
      position: fixed; top: 20px;
      left: 50%; transform: translateX(-50%);
      z-index: 10;
      animation: fadeInUpSmooth 2s ease-out both;
    }
    .header h1 {
      font-size: 3rem; font-weight: 700;
    }
    .header h2 {
      font-size: 1.8rem; font-weight: 500;
      margin-top: 0.3rem;
      animation: fadeInUpSmooth 2.5s ease-out both;
    }

    /* Generate button */
    #generate-btn {
      position: fixed; top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      background: transparent; border: 2px solid #fff;
      color: #fff; padding: 15px 40px;
      font-size: 1.2rem; font-weight: 600;
      border-radius: 50px; cursor: pointer;
      backdrop-filter: blur(5px);
      box-shadow: 0 0 15px rgba(255,255,255,0.3);
      transition: all 0.35s ease;
      animation: fadeInUpSmooth 3s ease-out both;
      z-index: 10;
    }
    #generate-btn:hover:not(:disabled) {
      background: rgba(255,255,255,0.15);
      transform: translate(-50%, -52%);
      box-shadow: 0 0 25px #fff;
    }
    #generate-btn:disabled {
      opacity: 0.5; cursor: not-allowed; box-shadow: none;
    }

    /* Result box */
    #result {
      position: fixed; top: calc(50% + 80px); left: 50%;
      transform: translateX(-50%);
      background: rgba(255,255,255,0.15); padding: 20px;
      border-radius: 15px; max-width: 360px;
      font-size: 1.1rem; font-weight: 500;
      box-shadow: 0 0 15px rgba(255,255,255,0.2);
      word-break: break-word; min-height: 60px;
      white-space: pre-line; opacity: 0;
      animation: fadeInUpSmooth 3.5s ease-out both;
      z-index: 10;
    }

    /* Footer */
    .footer {
      position: fixed; bottom: 20px;
      left: 50%; transform: translateX(-50%);
      font-size: 0.9rem; color: #ddd;
      z-index: 10;
      animation: fadeInUpSmooth 4s ease-out both;
    }

    /* Responsive tweaks */
    @media (max-width: 400px) {
      .header h1 { font-size: 2.5rem; }
      .header h2 { font-size: 1.5rem; }
      #generate-btn { width: 80%; padding: 12px; font-size: 1rem; }
      #result { max-width: 90%; padding: 15px; font-size: 1rem; }
    }
  </style>
</head>
<body>

  <!-- Video Background -->
  <video id="bg-video" autoplay muted loop playsinline>
    <source src="assets/bg.mp4" type="video/mp4" />
  </video>

  <!-- Header -->
  <div class="header">
    <h1>Pet Duper</h1>
    <h2>Echo Scripts Key Generator</h2>
  </div>

  <!-- Generate Button & Result -->
  <button id="generate-btn">Generate Key</button>
  <div id="result"></div>

  <!-- Footer -->
  <div class="footer">made by: Echo Scripts</div>

  <script>
    const btn = document.getElementById('generate-btn');
    const resultEl = document.getElementById('result');
    let generated = false;

    btn.addEventListener('click', () => {
      if (generated) return;
      generated = true;
      btn.disabled = true;
      resultEl.style.opacity = 0;
      resultEl.textContent = 'Generating...';

      fetch(`https://petkeydupe.onrender.com/generate-key?deviceId=${crypto.randomUUID()}`)
        .then(r => r.json())
        .then(data => {
          resultEl.textContent = data.success
            ? `${data.message}\nKey: ${data.key}`
            : `Error: ${data.message}`;
        })
        .catch(() => resultEl.textContent = 'Network error or backend unreachable')
        .finally(() => {
          // Fade in result
          resultEl.style.transition = 'opacity 1s ease, transform 1s ease';
          resultEl.style.opacity = 1;
        });
    });
  </script>
</body>
</html>
